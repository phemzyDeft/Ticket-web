<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enter Password - Ticketmaster</title>
  <link rel="stylesheet" href="index.css">
  <script>
    // Function to handle password submission
    function handlePasswordLogin(event) {
      event.preventDefault();
      
      // Clear previous errors
      clearErrors();
      
      const password = document.getElementById('password-input').value;
      
      if (!password) {
        showError('password-input', 'Please enter your password');
        return;
      }
      
      if (password.length < 6) {
        showError('password-input', 'Password must be at least 6 characters long');
        return;
      }
      
      // Simulate successful login
      showLoginSuccessModal();
    }
    
    // Function to show error below input field
    function showError(fieldId, message) {
      const field = document.getElementById(fieldId);
      const errorDiv = document.getElementById(fieldId + '-error');
      if (errorDiv) {
        errorDiv.textContent = message;
        errorDiv.style.display = 'block';
      }
      field.classList.add('error');
    }
    
    // Function to clear all errors
    function clearErrors() {
      const errorElements = document.querySelectorAll('.error-message');
      errorElements.forEach(error => {
        error.style.display = 'none';
      });
      
      const inputFields = document.querySelectorAll('.form-input');
      inputFields.forEach(field => {
        field.classList.remove('error');
      });
    }
    
    // Show login success modal
    function showLoginSuccessModal() {
      const modal = document.getElementById('login-success-modal');
      modal.style.display = 'flex';
    }
    
    // Close login success modal and redirect
    function redirectToIndex() {
      const modal = document.getElementById('login-success-modal');
      modal.style.display = 'none';
      
      // Store login status
      localStorage.setItem('isLoggedIn', 'true');
      
      // Redirect to main page
      window.location.href = 'index.html';
    }
    
    // Enable the sign in button when password is entered
    function enableSignInButton() {
      const password = document.getElementById('password-input').value;
      const signInBtn = document.getElementById('signin-btn');
      
      if (password.length > 0) {
        signInBtn.disabled = false;
        signInBtn.classList.remove('disabled');
        signInBtn.classList.add('enabled');
      } else {
        signInBtn.disabled = true;
        signInBtn.classList.add('disabled');
        signInBtn.classList.remove('enabled');
      }
    }
    
    // Toggle password visibility
    function togglePasswordVisibility() {
      const passwordInput = document.getElementById('password-input');
      const toggleIcon = document.getElementById('toggle-icon');
      
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.innerHTML = 'üëÅÔ∏è';
      } else {
        passwordInput.type = 'password';
        toggleIcon.innerHTML = 'üëÅÔ∏è‚Äçüó®Ô∏è';
      }
    }
    
    // Go back to email entry
    function goBack() {
      window.location.href = 'login.html';
    }
    
    // Load page when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      // Check if email is stored
      const email = localStorage.getItem('userEmail');
      if (!email) {
        alert('Please enter your email first');
        window.location.href = 'login.html';
        return;
      }
      
      // Display email in the page
      document.getElementById('user-email').textContent = email;
      
      // Add event listeners
      const form = document.querySelector('form');
      form.addEventListener('submit', handlePasswordLogin);
      
      const passwordInput = document.getElementById('password-input');
      passwordInput.addEventListener('input', enableSignInButton);
      
      const signInBtn = document.getElementById('signin-btn');
      signInBtn.addEventListener('click', handlePasswordLogin);
      
      const toggleBtn = document.getElementById('toggle-password');
      toggleBtn.addEventListener('click', togglePasswordVisibility);
      
      const goBackBtn = document.getElementById('go-back');
      goBackBtn.addEventListener('click', goBack);
    });
  </script>
</head>

<body>
  <div class="login-container">
    <!-- Left Column - Welcome Section -->
    <div class="welcome-section">
      <div class="welcome-content">
        <h1 class="welcome-title">WELCOME</h1>
        <div class="welcome-divider"></div>
        <p class="welcome-description">
          Discover millions of events, get alerts about your favorite artists, teams, plays and more ‚Äî plus always- secure, effortless ticketing.
        </p>
        <div class="welcome-logo">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="white">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Right Column - Password Form -->
    <div class="login-section">
      <div class="login-content">
        <h2 class="login-title">ENTER YOUR PASSWORD</h2>
        <p class="login-subtitle">Sign in to your Ticketmaster account using email <span class="user-email" id="user-email"></span></p>
        
        <form class="login-form">
          <div class="form-group">
            <label for="password-input" class="form-label">Password</label>
            <div class="password-input-container">
              <input 
                type="password" 
                id="password-input" 
                name="password" 
                class="form-input password-input" 
                autocomplete="current-password"
                required
              />
              <button type="button" id="toggle-password" class="password-toggle">
                <span id="toggle-icon">üëÅÔ∏è‚Äçüó®Ô∏è</span>
              </button>
            </div>
            <div id="password-input-error" class="error-message"></div>
            <a href="#" class="forgot-password">Forgot Password?</a>
          </div>
          
          <button type="submit" id="signin-btn" class="continue-btn disabled" disabled>
            Sign in
          </button>
          
          <div class="divider">
            <span class="divider-text">OR</span>
          </div>
          
          <button type="button" id="passkey-btn" class="passkey-btn">
            <svg class="passkey-icon" viewBox="0 0 24 24" width="20" height="20">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
            </svg>
            Sign In With A Passkey
          </button>
          
          <a href="#" id="go-back" class="passkey-help">Go Back</a>
        </form>
        
        <div class="legal-text">
          <p>
            By continuing past this page, I acknowledge that I have read and agree to the current 
            <a href="https://help.ticketmaster.com/hc/en-us/articles/10468830739345-Terms-of-Use" target="_blank" class="legal-link">Terms of Use</a>, 
            including the arbitration agreement and class action waiver, updated in August 2025, and understand that information will be used as described in our 
            <a href="https://privacy.ticketmaster.com/privacy-policy" target="_blank" class="legal-link">Privacy Policy</a>.
          </p>
          <p>
            As set forth in our Privacy Policy, we may use your information for email marketing, including promotions and updates on our own or third-party products. You can opt out of our marketing emails anytime.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Login Success Modal -->
  <div id="login-success-modal" class="success-modal">
    <div class="success-modal-content">
      <div class="success-icon">‚úÖ</div>
      <h3 class="success-title">Successfully Signed In!</h3>
      <p class="success-message">Welcome back! Redirecting to your tickets...</p>
      <button onclick="redirectToIndex()" class="success-button">Continue</button>
    </div>
  </div>
</body>

</html>
