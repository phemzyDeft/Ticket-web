<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Custom Message - Local Event</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #0066cc;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
            text-decoration: none;
            display: inline-block;
        }
        .test-button:hover {
            background: #0052a3;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        .url-display {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
            margin: 10px 0;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        h2 {
            color: #0066cc;
            border-bottom: 2px solid #0066cc;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸŽ« Test Custom Message - Local Event</h1>
        
        <div class="test-section">
            <h2>Test Event Details</h2>
            <p><strong>Event:</strong> Taylor Swift - The Eras Tour</p>
            <p><strong>Venue:</strong> SoFi Stadium, Inglewood, CA</p>
            <p><strong>Date:</strong> August 8, 2024 at 7:00 PM</p>
            <p><strong>Seats:</strong> Section 200, Row 15, Seats 8-9</p>
            <p><strong>Sender:</strong> Sarah Johnson</p>
            <p><strong>Recipient:</strong> Alex Smith</p>
        </div>

        <div class="test-section">
            <h2>Test Custom Messages</h2>
            
            <h3>Test 1: Short Custom Message</h3>
            <p>This tests a simple custom message that should work fine in the URL.</p>
            <div class="url-display" id="url1"></div>
            <a href="#" class="test-button" onclick="testShortMessage()">Test Short Message</a>
            
            <h3>Test 2: Long Custom Message</h3>
            <p>This tests a longer custom message that might trigger the localStorage fallback.</p>
            <div class="url-display" id="url2"></div>
            <a href="#" class="test-button" onclick="testLongMessage()">Test Long Message</a>
            
            <h3>Test 3: Special Characters Message</h3>
            <p>This tests custom messages with special characters and emojis.</p>
            <div class="url-display" id="url3"></div>
            <a href="#" class="test-button" onclick="testSpecialChars()">Test Special Characters</a>
            
            <h3>Test 4: No Custom Message</h3>
            <p>This tests the page without any custom message (should use default).</p>
            <div class="url-display" id="url4"></div>
            <a href="#" class="test-button" onclick="testNoMessage()">Test No Message</a>
        </div>

        <div class="test-section">
            <h2>Direct URL Tests</h2>
            <p>You can also test by directly visiting these URLs:</p>
            <div class="url-display" id="directUrls"></div>
        </div>
    </div>

    <script>
        // Base URL for testing
        const baseUrl = window.location.origin + window.location.pathname.replace('test-custom-message.html', '');
        
        // Test data
        const testData = {
            recipientName: 'Alex Smith',
            senderName: 'Sarah Johnson',
            eventName: 'Taylor Swift - The Eras Tour',
            eventDetails: 'SoFi Stadium, Inglewood, CA',
            eventDate: 'August 8, 2024',
            eventTime: '7:00 PM',
            ticketCount: '2',
            section: '200',
            row: '15',
            seats: '8-9',
            ticketType: 'Seated'
        };

        // Test messages
        const testMessages = {
            short: "Hey! Hope you enjoy the concert! ðŸŽµ",
            long: "Hey Alex! I'm so excited to share these tickets with you! Taylor Swift is absolutely amazing live and I know you're going to love every minute of it. The Eras Tour has been incredible and this is going to be such a special night. Make sure to get there early because the opening acts are fantastic too. Can't wait to hear all about it when you get back! Have the best time! ðŸŽ¤âœ¨ðŸŽ‰",
            special: "Hey! ðŸŽµâœ¨ Hope you enjoy the concert! Don't forget to bring your dancing shoes! ðŸ’ƒðŸ•º #TaylorSwift #ErasTour #BestNightEver",
            none: ""
        };

        function buildTestUrl(customMessage) {
            const params = new URLSearchParams({
                ...testData,
                customMessage: customMessage
            });
            return `${baseUrl}accept-ticket.html?${params.toString()}`;
        }

        function testShortMessage() {
            const url = buildTestUrl(testMessages.short);
            document.getElementById('url1').textContent = url;
            window.open(url, '_blank');
        }

        function testLongMessage() {
            const url = buildTestUrl(testMessages.long);
            document.getElementById('url2').textContent = url;
            window.open(url, '_blank');
        }

        function testSpecialChars() {
            const url = buildTestUrl(testMessages.special);
            document.getElementById('url3').textContent = url;
            window.open(url, '_blank');
        }

        function testNoMessage() {
            const url = buildTestUrl(testMessages.none);
            document.getElementById('url4').textContent = url;
            window.open(url, '_blank');
        }

        function displayDirectUrls() {
            const urls = [
                buildTestUrl(testMessages.short),
                buildTestUrl(testMessages.long),
                buildTestUrl(testMessages.special),
                buildTestUrl(testMessages.none)
            ];
            document.getElementById('directUrls').innerHTML = urls.map((url, index) => 
                `<div style="margin: 5px 0;"><strong>Test ${index + 1}:</strong><br>${url}</div>`
            ).join('');
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            displayDirectUrls();
        });
    </script>
</body>
</html>
