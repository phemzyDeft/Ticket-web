<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Date Parameters</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-container { max-width: 600px; margin: 0 auto; }
        .test-button { 
            background: #0066cc; 
            color: white; 
            padding: 15px 30px; 
            border: none; 
            border-radius: 6px; 
            font-size: 16px; 
            cursor: pointer; 
            margin: 10px 5px;
            text-decoration: none;
            display: inline-block;
        }
        .url-output { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 4px; 
            margin: 20px 0; 
            word-break: break-all; 
            font-family: monospace; 
            border: 1px solid #e9ecef;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ§ª Test Date Parameters</h1>
        <p>Test the accept-ticket page with properly formatted dates including years.</p>
        
        <button class="test-button" onclick="testFormattedDate()">Test with Formatted Date (2025)</button>
        <button class="test-button" onclick="testFormattedDate2024()">Test with Formatted Date (2024)</button>
        <button class="test-button" onclick="testMissingYear()">Test Missing Year (should auto-add)</button>
        
        <div id="url-output" class="url-output" style="display: none;"></div>
    </div>

    <script>
        function generateTestUrl(data) {
            const baseUrl = 'http://localhost:8000/accept-ticket.html';
            const params = new URLSearchParams();
            
            Object.keys(data).forEach(key => {
                if (data[key] && data[key] !== '') {
                    params.append(key, encodeURIComponent(data[key]));
                }
            });
            
            return `${baseUrl}?${params.toString()}`;
        }
        
        function testFormattedDate() {
            const data = {
                recipientName: 'Test User',
                senderName: 'Tomiwa Lawal',
                eventName: 'Ariana Grande - The Eternal Sunshine Tour',
                eventDetails: 'United Center',
                eventDate: 'Mon, Dec 15, 2025, 1:00 PM', // Full formatted date with year
                eventTime: '1:00 PM',
                ticketCount: '1',
                section: '416',
                row: '5',
                seats: '9',
                ticketType: 'Seated'
            };
            
            const url = generateTestUrl(data);
            document.getElementById('url-output').innerHTML = `
                <strong>Test with Full Formatted Date (2025):</strong><br>
                <a href="${url}" target="_blank" style="color: #0066cc;">${url}</a><br><br>
                <strong>Expected:</strong> Should display "Mon, Dec 15, 2025, 1:00 PM" (no duplication)
            `;
            document.getElementById('url-output').style.display = 'block';
        }
        
        function testFormattedDate2024() {
            const data = {
                recipientName: 'Test User',
                senderName: 'Tomiwa Lawal',
                eventName: 'Ariana Grande - The Eternal Sunshine Tour',
                eventDetails: 'United Center',
                eventDate: 'Wed, Aug 5, 2024, 8:00 PM', // Full formatted date with year
                eventTime: '8:00 PM',
                ticketCount: '1',
                section: '416',
                row: '5',
                seats: '9',
                ticketType: 'Seated'
            };
            
            const url = generateTestUrl(data);
            document.getElementById('url-output').innerHTML = `
                <strong>Test with Full Formatted Date (2024):</strong><br>
                <a href="${url}" target="_blank" style="color: #0066cc;">${url}</a><br><br>
                <strong>Expected:</strong> Should display "Wed, Aug 5, 2024, 8:00 PM" (no duplication)
            `;
            document.getElementById('url-output').style.display = 'block';
        }
        
        function testMissingYear() {
            const data = {
                recipientName: 'Test User',
                senderName: 'Tomiwa Lawal',
                eventName: 'Ariana Grande - The Eternal Sunshine Tour',
                eventDetails: 'United Center',
                eventDate: 'Wed, Aug 5', // Missing year - should auto-add current year
                eventTime: '8:00 PM',
                ticketCount: '1',
                section: '416',
                row: '5',
                seats: '9',
                ticketType: 'Seated'
            };
            
            const url = generateTestUrl(data);
            const currentYear = new Date().getFullYear();
            document.getElementById('url-output').innerHTML = `
                <strong>Test with Missing Year (should auto-add ${currentYear}):</strong><br>
                <a href="${url}" target="_blank" style="color: #0066cc;">${url}</a><br><br>
                <strong>Expected:</strong> Should display "Wed, Aug 5, ${currentYear} at 8:00 PM"
            `;
            document.getElementById('url-output').style.display = 'block';
        }
    </script>
</body>
</html>
